(@def get_pixel {
		(@def x $0)
		(@def y $1)
		(@def c1 (@complex x y))
		(@def c2 (@complex 0 0))
		(@map (@range 1 900) {
				(@def n $1)
				(@if (@gt (@abs c2) 2) (@return_len n 2) (@mod c2 (@add (@pow c2 2) c1)))
		})
		(@return 0)
})

#(@def path (@select @sys_args 1))
#(@def width (@int (@select @sys_args 2)))
#(@def height (@int (@select @sys_args 3)))
(@def width 100)
(@def height 100)
(@io_outln "abc $width")
(@io_outln "def")
(@io_outln "ghi")

##(get_pixel 1 1)##

(@map (@range width) {
		(@def x $1)
		(@map (@range height) {
				(@def y $1)
				(@def value (get_pixel
						(@div (@sub x (@mul 0.75 width)) (@mul 0.25 width))
						(@div (@sub y (@add (@mul 0.25 height) (@mul 0.25 width))) (@mul 0.25 width))
				))
				(@io_outln "$x $y $value")
		})
})

